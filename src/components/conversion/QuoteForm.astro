---
export const prerender = true;
---
<form id="quoteForm" method="POST" action="/api/quote" class="space-y-4">
  <slot />
</form>
<div id="quoteSuccess" class="hidden">Thank you.</div>
<div id="quoteError" class="hidden">Something went wrong.</div>
<script>
  const form = document.getElementById("quoteForm");
  if (form instanceof HTMLFormElement) {
    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      const d = new FormData(form);
      try {
        const r = await fetch(form.action, { method: "POST", body: d });
        if (r.ok) {
          const ok = document.getElementById("quoteSuccess"); if (ok) ok.classList.remove("hidden");
          form.reset();
        } else {
          const err = document.getElementById("quoteError"); if (err) err.classList.remove("hidden");
        }
      } catch {
        const err = document.getElementById("quoteError"); if (err) err.classList.remove("hidden");
      }
    });
  }
</script>