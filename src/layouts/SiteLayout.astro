---
import { titleTag, metaDesc, canonical } from "../lib/seo";
interface Alert { text: string; href?: string }
interface Props { title?: string; description?: string; alert?: Alert | null; pathname?: string }
const p = Astro.props as Props;
const pageTitle = titleTag(p.title);
const desc = metaDesc(p.description);
const url = canonical(p.pathname ?? Astro.url.pathname);
const schema = { "@context":"https://schema.org","@type":"WebPage","name":pageTitle,"description":desc,"url":url };
---
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{pageTitle}</title>
    <meta name="description" content={desc} />
    <link rel="canonical" href={url} />
    <meta property="og:title" content={pageTitle} />
    <meta property="og:description" content={desc} />
    <meta property="og:url" content={url} />
    <meta name="twitter:card" content="summary_large_image" />
    <slot name="head" />
    <script type="application/ld+json" is:inline set:html={JSON.stringify(schema)}></script>
  </head>
  <body class="min-h-screen bg-white text-gray-900">
    {p.alert && (
      <a href={p.alert.href ?? "#"} class="block w-full text-center text-[13px] bg-blue-700 text-white py-2">{p.alert.text}</a>
    )}
    <slot />
  </body>
</html>
