---
import BaseLayout from "../../../layouts/BaseLayout.astro";
import { ALL_CITIES, SERVICES, SITE } from "../../../data/site";

export const prerender = true;

export function getStaticPaths() {
  return ALL_CITIES.map((c) => ({
    params: { city: c.slug },
    props: { city: c }
  }));
}

const { city } = Astro.props;

const pageTitle = `${city.name} Service Area | ${SITE.name}`;
const desc = `Mailbox installs, CBUs, 4C wall-mounted mailboxes, parcel lockers, repairs & ADA-compliant installs in ${city.name}, CA.`;
const url = new URL(Astro.url.pathname, SITE.url).toString();

const schema = {
  "@context": "https://schema.org",
  "@type": "Service",
  name: `Mailbox services in ${city.name}`,
  areaServed: `${city.name}, CA`,
  provider: { "@type": "LocalBusiness", name: SITE.name, telephone: SITE.phone, url: SITE.url }
};
---
<BaseLayout title={pageTitle} description={desc} url={url} schema={schema}>
  <main class="max-w-5xl mx-auto p-6 space-y-8">
    <header class="space-y-2">
      <h1 class="text-2xl font-semibold">{city.name} Service Area</h1>
      <p class="text-gray-700">{desc}</p>
    </header>

    <section class="space-y-4">
      <h2 class="text-xl font-semibold">Services we provide in {city.name}</h2>
      <ul class="grid gap-3 sm:grid-cols-2">
        {SERVICES.map((svc) => (
          <li class="border rounded-lg p-4 hover:shadow">
            <a href={`/service-area/${city.slug}/${svc.slug}/`} class="font-medium underline">{svc.name}</a>
            {svc.blurb && <p class="text-gray-700 mt-1">{svc.blurb}</p>}
          </li>
        ))}
      </ul>
    </section>

    <section class="space-y-2">
      <h2 class="text-xl font-semibold">Primary Coverage</h2>
      <p class="text-gray-700">
        We focus on San Diego County. We also take projects in Temecula (Riverside County) and Orange County.
      </p>
    </section>
  </main>
</BaseLayout>
