---
import SiteLayout from "../../layouts/SiteLayout.astro"
import CTA from "../../components/ui/CTA.astro"
import Breadcrumbs from "../../components/Breadcrumbs.astro"
import { slugify } from "../../lib/slug"

export async function getStaticPaths() {
  const services = (await import("../../data/services.json")).default
  return services.map((s)=>({ params: { service: slugify(s.name) }, props: { s } }))
}

const { s } = Astro.props as { s: any }
const canonical = `https://postalsystemspro.com/services/${slugify(s.name)}/`
const title = `${s.name} â€” Postal Systems`
const desc = s.summary || "USPS-approved commercial mailbox work in San Diego County."
---
<html lang="en">
  <head>
    <SiteLayout title={title} description={desc} canonical={canonical} />
  </head>
  <body>
    <main class="max-w-6xl mx-auto px-4 py-10">
      <Breadcrumbs crumbs={[{href:'/',label:'Home'},{href:'/services/',label:'Services'},{href:canonical,label:s.name}]} />
      <h1 class="text-3xl font-bold tracking-tight">{s.name}</h1>
      <p class="mt-2 text-gray-600">{desc}</p>
      {s.content && <div class="prose max-w-none mt-6" set:html={s.content}></div>}
      <div class="mt-10"><CTA /></div>
    </main>
  </body>
</html>
