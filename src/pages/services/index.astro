---
import { postalSystemsLocalBusinessSchema as schema } from "../../schema/localBusiness";
import SiteLayout from "../../layouts/SiteLayout.astro"
import CTA from "../../components/ui/CTA.astro"
import SectionHeader from "../../components/ui/SectionHeader.astro"
import { slugify } from "../../lib/slug"
import TrustGrid from "../../components/TrustGrid.astro"
import ProcessStrip from "../../components/ProcessStrip.astro"
import PSImage from "../../components/PSImage.astro"

const services = (await import("../../data/services.json")).default as {
  name: string
  summary?: string
}[]

const title = "Mailbox Services in San Diego County | Postal Systems"
const description =
  "USPS-approved commercial mailbox services: installation, CBU and 4C systems, parcel lockers, repairs, and ADA-compliant upgrades across San Diego County."
const canonical = "https://sandiegocommercialmailboxes.com/services/"
export const prerender = true

const imageKeyBySlug: Record<string, string> = {
  "commercial-mailbox-installation": "commercial-mailbox-installation-san-diego-ca",
  "cbu-installation": "parcel-locker-installation-san-diego-county",
  "4c-wall-mounted-mailboxes": "commercial-mailbox-installation-oceanside-ca",
  "parcel-lockers": "commercial-mailbox-installation-poway-ca",
  "repairs-lock-changes": "4c-wall-mounted-mailboxes-san-diego-county",
  "ada-compliant-installs": "4c-wall-mounted-mailboxes-san-marcos-ca",
  "mailbox-replacement-retrofits": "cbu-mailbox-installation-riverside-county-ca",
  "mailbox-relocation-consolidation": "cbu-mailbox-installation-chula-vista-ca"
}
---
<SiteLayout {title} {description} {canonical} schema={schema}>
  <main class="max-w-6xl mx-auto px-4 lg:px-6 py-10">
    <h1 class="sr-only">
      Mailbox services in San Diego County
    </h1>

    <SectionHeader
      title="Mailbox services"
      subtitle="Turnkey installation, replacements, and repairs for commercial mailbox systems with USPS coordination and inspection sign-off."
      align="left"
    />

    <div class="mt-8 grid md:grid-cols-2 gap-6">
      {services.map((s) => {
        const slug = slugify(s.name)
        const imageKey = imageKeyBySlug[slug]
        return (
          <article class="rounded-2xl border border-ps-muted bg-white p-5 shadow-ps hover:-translate-y-1 hover:shadow-[0_20px_50px_rgba(1,33,105,0.18)] transition flex flex-col">
            {imageKey && (
              <div class="mb-3 rounded-xl overflow-hidden aspect-[4/3] bg-ps-surface">
                <PSImage
                  imageKey={imageKey}
                  class="h-full w-full object-cover"
                  loading="lazy"
                />
              </div>
            )}
            <h2 class="text-sm font-semibold text-ps-navy">
              <a
                href={`/services/${slug}/`}
                class="hover:text-ps-red"
              >
                {s.name}
              </a>
            </h2>
            {s.summary && (
              <p class="mt-2 text-xs text-ps-navy/80">
                {s.summary}
              </p>
            )}
            <a
              href={`/services/${slug}/`}
              class="mt-3 inline-flex text-xs font-semibold text-ps-red hover:text-ps-red/90"
            >
              View service â†’
            </a>
          </article>
        )
      })}
    </div>

    <section class="mt-12">
      <SectionHeader
        title="Popular service areas"
        subtitle="Find mailbox services in your city across San Diego County."
        align="left"
      />
      <ul class="mt-4 grid md:grid-cols-4 gap-3 text-sm">
        {[
          { city: 'San Diego', slug: 'san-diego' },
          { city: 'Carlsbad', slug: 'carlsbad' },
          { city: 'Oceanside', slug: 'oceanside' },
          { city: 'Chula Vista', slug: 'chula-vista' },
          { city: 'Encinitas', slug: 'encinitas' },
          { city: 'Escondido', slug: 'escondido' },
          { city: 'San Marcos', slug: 'san-marcos' },
          { city: 'Vista', slug: 'vista' },
        ].map((c) => (
          <li>
            <a
              href={`/service-areas/${c.slug}/`}
              class="block rounded-lg border border-ps-muted bg-white px-3 py-2 text-ps-navy hover:border-ps-red/60 hover:text-ps-red"
            >
              {c.city}
            </a>
          </li>
        ))}
      </ul>
    </section>

    <section class="mt-12">
      <SectionHeader
        title="Why Postal Systems for mailbox services?"
        subtitle="Local, USPS-approved contractor with turnkey installation and replacement for commercial properties."
        align="left"
      />
      <div class="mt-4">
        <TrustGrid />
      </div>
    </section>

    <ProcessStrip subtitle="From site visit and layout through USPS sign-off, we handle every step of your mailbox project." />

    <div class="mt-12">
      <CTA primaryHref="/contact/" primaryLabel="Get a USPS-approved quote" />
    </div>
  </main>
</SiteLayout>
